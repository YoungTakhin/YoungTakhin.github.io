{"title":"MyBatis框架入门一. 框架概述","date":"2019-11-16T07:05:20.000Z","date_formatted":{"ll":"2019年11月16日","L":"2019/11/16","MM-DD":"11-16"},"color":"#EBF8FF","link":"2019/11/16/MyBatis框架入门一-框架概述","comments":true,"tags":["Java","MyBatis"],"categories":["MyBatis"],"updated":"2019-12-03T08:02:23.580Z","content":"<h1 id=\"MyBatis框架入门一-框架概述\">MyBatis框架入门一. 框架概述<a href=\"2019/11/16/MyBatis框架入门一-框架概述#MyBatis框架入门一-框架概述\"></a></h1><h2 id=\"什么是框架？\">什么是框架？<a href=\"2019/11/16/MyBatis框架入门一-框架概述#什么是框架？\"></a></h2><p>框架（Framework）是整个或部分系统的可重用设计，表现为一组抽象构件及构件实例间交互的方法；另一种定义认为，框架是可被应用开发者定制的应用骨架。前者是从应用方面而后者是从目的方面给出的定义。 </p>\n<p>简而言之，框架是软件开发中的一套解决方案，不同框架解决不通问题。</p>\n<p>使用框架的好处：框架封装了很多细节，使开发者可使用极简的方式实现功能，提高开发效率。</p>\n<h2 id=\"MVC三层架构\">MVC三层架构<a href=\"2019/11/16/MyBatis框架入门一-框架概述#MVC三层架构\"></a></h2><ul>\n<li>表现层（User Interface layer, UIL）：展示数据</li>\n<li>业务层（Business Logic Layer, BLL）：处理业务需求</li>\n<li>持久层（Data access layer, DAL）：数据库交互</li>\n</ul>\n<p><img src=\"https://s2.ax1x.com/2019/11/16/M0OJk4.png\" alt=\"三层架构\" class=\"article-img\"></p>\n<h2 id=\"持久层技术解决方案\">持久层技术解决方案<a href=\"2019/11/16/MyBatis框架入门一-框架概述#持久层技术解决方案\"></a></h2><h3 id=\"JDBC技术\">JDBC技术<a href=\"2019/11/16/MyBatis框架入门一-框架概述#JDBC技术\"></a></h3><ul>\n<li>Connection</li>\n<li>PreparedStatement</li>\n<li>ResultSet</li>\n</ul>\n<h3 id=\"Spring的JdbcTemplate\">Spring的JdbcTemplate<a href=\"2019/11/16/MyBatis框架入门一-框架概述#Spring的JdbcTemplate\"></a></h3><p>Spring中对JDBC的简单封装</p>\n<h3 id=\"Apache的DBUtils\">Apache的DBUtils<a href=\"2019/11/16/MyBatis框架入门一-框架概述#Apache的DBUtils\"></a></h3><p>Apache中对JDBC的简单封装</p>\n<p>以上这些都不是框架：</p>\n<p>JDBC是规范，Spring的JdbcTemplate和Apache的DBUtils都只是工具类</p>\n<h2 id=\"JDBC代码示例\">JDBC代码示例<a href=\"2019/11/16/MyBatis框架入门一-框架概述#JDBC代码示例\"></a></h2><p>如下代码使用了 JDBC 的原始方法（未经封装）实现查询数据库表记录的操作。 </p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    Connection connection = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    PreparedStatement preparedStatement = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    ResultSet resultSet = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//加载数据库驱动</span></span><br><span class=\"line\">        Class.forName(<span class=\"string\">\"com.mysql.cj.jdbc.Driver\"</span>);</span><br><span class=\"line\">        <span class=\"comment\">//通过驱动管理类获取数据库链接</span></span><br><span class=\"line\">        String url = <span class=\"string\">\"jdbc:mysql://localhost:3306/mybatis?serverTimezone=UTC&amp;characterEncoding=utf-8\"</span>;</span><br><span class=\"line\">        String username = <span class=\"string\">\"用户名\"</span>;</span><br><span class=\"line\">        String password = <span class=\"string\">\"密码\"</span>;</span><br><span class=\"line\">        connection = DriverManager.getConnection(url, username, password);</span><br><span class=\"line\">        <span class=\"comment\">//定义SQL语句，?表示占位符</span></span><br><span class=\"line\">        String sql = <span class=\"string\">\"select * from user where username = ?\"</span>;</span><br><span class=\"line\">        <span class=\"comment\">//获取预处理statement</span></span><br><span class=\"line\">        preparedStatement = connection.prepareStatement(sql);</span><br><span class=\"line\">        <span class=\"comment\">//设置参数，第一个参数为SQL语句中参数的序号（从1开始），第二个参数为设置的参数值</span></span><br><span class=\"line\">        preparedStatement.setString(<span class=\"number\">1</span>, <span class=\"string\">\"杨得轩\"</span>);</span><br><span class=\"line\">        <span class=\"comment\">//向数据库发出SQL执行查询，查询出结果集</span></span><br><span class=\"line\">        resultSet = preparedStatement.executeQuery();</span><br><span class=\"line\">        <span class=\"comment\">//遍历查询结果集</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (resultSet.next()) &#123;</span><br><span class=\"line\">            System.out.println(resultSet.getString(<span class=\"string\">\"id\"</span>) + <span class=\"string\">\"\\t\"</span> + resultSet.getString(<span class=\"string\">\"username\"</span>));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//释放资源</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (resultSet != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                resultSet.close();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (SQLException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (preparedStatement != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                preparedStatement.close();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (SQLException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (connection != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                connection.close();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (SQLException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"原始JDBC缺点\">原始JDBC缺点<a href=\"2019/11/16/MyBatis框架入门一-框架概述#原始JDBC缺点\"></a></h3><ul>\n<li>数据库链接创建、释放频繁造成系统资源浪费从而影响系统性能，如果使用数据库链接池可解决此问题。</li>\n<li>SQL 语句在代码中硬编码，造成代码不易维护，实际应用 SQL 变化的可能较大，SQL 变动需要改变 Java 代码。 </li>\n<li>使用 preparedStatement 向占有位符号传参数存在硬编码，因为 SQL 语句的 where 条件不一定，可能多也可能少，修改 SQL 还要修改代码，系统不易维护。</li>\n<li>对结果集解析存在硬编码(查询列名)，SQL变化导致解析代码变化，系统不易维护，如果能将数据库记 录封装成 POJO 对象解析比较方便。</li>\n</ul>\n","prev":{"title":"MyBatis框架入门二. MyBatis框架入门","link":"2019/11/16/MyBatis框架入门二-MyBatis框架入门"},"next":{"title":"Hello World","link":"2019/10/30/hello-world"},"plink":"https://alpac.top/2019/11/16/MyBatis框架入门一-框架概述/","toc":[{"title":"MyBatis框架入门一. 框架概述","id":"MyBatis框架入门一-框架概述","index":"1","children":[{"title":"什么是框架？","id":"什么是框架？","index":"1.1"},{"title":"MVC三层架构","id":"MVC三层架构","index":"1.2"},{"title":"持久层技术解决方案","id":"持久层技术解决方案","index":"1.3","children":[{"title":"JDBC技术","id":"JDBC技术","index":"1.3.1"},{"title":"Spring的JdbcTemplate","id":"Spring的JdbcTemplate","index":"1.3.2"},{"title":"Apache的DBUtils","id":"Apache的DBUtils","index":"1.3.3"}]},{"title":"JDBC代码示例","id":"JDBC代码示例","index":"1.4","children":[{"title":"原始JDBC缺点","id":"原始JDBC缺点","index":"1.4.1"}]}]}],"reward":true,"copyright":{"author":"Yang Dexuan","link":"<a href=\"https://alpac.top/2019/11/16/MyBatis框架入门一-框架概述/\" title=\"MyBatis框架入门一. 框架概述\">https://alpac.top/2019/11/16/MyBatis框架入门一-框架概述/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"}}